# Prometheus metrics
[sources.internal_metrics]
type = "internal_metrics"

[sources.host_metrics]
type = "host_metrics"

[sinks.prometheus]
type = "prometheus"
inputs = ["internal_metrics", "host_metrics"]
address = "0.0.0.0:1111"

# Log pipeline
[sources.logs]
type = "docker"
include_containers = ["flog"]

[transforms.json]
type = "json_parser"
inputs = ["logs"]

[transforms.trim]
type = "remove_fields"
inputs = ["json"]
fields = ["container_created_at", "container_id", "container_name", "image", "label", "source_type", "stream"]

[sinks.console]
type = "console"
inputs = ["trim"]
target = "stdout"
encoding.codec = "json"
